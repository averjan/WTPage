
{sub_navbar}

<section class="search-back">
    <div id="main">
        <div class="search-result cocktail-grid">
            <!--
            <?php for($i = 0; $i < count($data); $i++ ): ?>
            <form method="post" action="/item_cocktail" class="cocktail-item">
                <a type="submit" onclick="this.closest('form').submit()" class="cocktail-item-preview">
                    <img src="../../../img/cocktails/<?=$data[$i]['FileName']?>.jpg" alt="<?=$data[$i]['FileName']?>" class="cocktail-item-image"/>
                    <div class="cocktail-item-name"><?=$data[$i]['Name']?></div>
                </a>
                <input type="hidden" name="id" value="<?=$i;?>">
            </form>
            <?php endfor; ?>
            -->
            {items}
        </div>
        <a class="common-more" href="#more">
            More
        </a>
    </div>
</section>

<script>
    function filterData(data) {

    }

    let sortItems
    $(document).ready(function() {
        sortItems = (filters) => {
            $.ajax({
                type: "GET",
                url: "cocktails/filter/value",
                data: {
                    strong: filters.get("strong"),
                    base: filters.get("base"),
                    taste: filters.get("taste")
                },
                success: function(data) {
                    let result = JSON.parse(data)
                    console.log(result)
                    $(".search-result").html(result)
                }
        })
        }
    })
    // document.getElementById("sub-nav-form").action = "cocktails/filter/value"

    for (let el of document.getElementsByClassName("filter")) {
        el.addEventListener('change', (e) => {
            e.preventDefault()
            let form = document.getElementById("sub-nav-form")
            let formData = new FormData(form)
            sortItems(formData)
        })
    }

    document.getElementById("sub-nav-form").addEventListener("submit", (e) => {
        e.preventDefault()
        let form = e.target
        let formData = new FormData(form)
        sortItems(formData)
    })

</script>